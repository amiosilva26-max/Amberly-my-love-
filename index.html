<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>For Amberly Valanka Fernandes</title>

<style>
:root { --pink:#ff4d6d; --dark:#590d22; --light:#fff0f3; }
body{margin:0;font-family:'Segoe UI',sans-serif;background:var(--light);color:var(--dark);overflow:hidden;touch-action:manipulation;}
.screen{position:absolute;width:100%;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;background:var(--light);}
.hidden{display:none!important;}
.card{background:white;padding:25px;width:85%;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.1);border:3px dashed var(--pink);}
#display-img{max-width:90%;max-height:40vh;border:5px solid white;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.2);}
.letter-content{width:85%;max-height:55vh;overflow:auto;background:white;padding:20px;border-radius:15px;border-left:5px solid var(--pink);text-align:left;font-size:0.9rem;white-space:pre-line;}
button{background:var(--pink);color:white;border:none;padding:12px 25px;border-radius:50px;font-size:1.1rem;font-weight:bold;margin:10px;}
#no-btn{background:#555;position:relative;}
.restart-btn{background:#555;font-size:0.9rem;}
.surprise-btn{background:#ff0054;font-size:1.5rem;padding:20px 40px;}
#gameCanvas{background:#87CEEB;width:100vw;height:50vh;border-top:4px solid var(--pink);}
#touch-zone{width:100vw;height:25vh;background:white;display:flex;flex-direction:column;align-items:center;justify-content:center;font-weight:bold;color:var(--pink);}
</style>
</head>

<body>

<div id="screen-card" class="screen">
<div class="card">
<h1 style="color:var(--pink)">Happy Valentine's Day</h1>
<p>To: Amberly Valanka Fernandes</p>
<button onclick="showSection('screen-slideshow')">Open üíå</button>
</div>
</div>

<div id="screen-slideshow" class="screen hidden">
<img id="display-img" src="Snapchat-1108914825.jpg">
<p id="slide-text"></p>
<button onclick="nextSlide()">Next ‚ù§Ô∏è</button>
</div>

<div id="screen-letter" class="screen hidden">
<div class="letter-content">
<h2 style="text-align:center">My Dearest Amberly</h2>
I love you more than pizzas and chocolates ‚ù§Ô∏è
</div>
<button onclick="showSection('screen-proposal')">Continue</button>
</div>

<div id="screen-proposal" class="screen hidden">
<h1 id="proposal-title">Will you be my Valentine?</h1>
<button onclick="respond('yes')">YES ‚ù§Ô∏è</button>
<button id="no-btn" onclick="handleNo()">NO üò≠</button>
</div>

<div id="screen-game" class="screen hidden">
<div style="padding:10px;font-weight:bold;background:white;width:100%;display:flex;justify-content:space-around;">
Score: <span id="score">0</span>/10
<button id="mini-restart" class="restart-btn hidden" onclick="resetGameOnly()">Try Again</button>
</div>

<canvas id="gameCanvas"></canvas>

<div id="touch-zone" onclick="handleJump()">TAP TO JUMP</div>
</div>

<div id="screen-surprise-btn" class="screen hidden">
<h1 style="color:var(--pink)">We belong together ‚ù§Ô∏è</h1>
<button class="surprise-btn" onclick="playFinalSurprise()">OPEN SURPRISE üéÅ</button>
</div>

<div id="screen-video" class="screen hidden">
<video id="finalVid"
controls
playsinline
muted
preload="auto"
style="max-height:70vh;border-radius:15px;background:black;">
<source src="surprise.mp4" type="video/mp4">
</video>

<button onclick="location.reload()">Restart ‚ù§Ô∏è</button>
</div>

<script>
const images=[
{src:'Snapchat-1108914825.jpg',msg:"The first time you stole my heart"},
{src:'Snapchat-2038672580.jpg',msg:"My foodie queen"},
{src:'Snapchat-359429037.jpg',msg:"Goofy love"},
{src:'Snapchat-756657078.jpg',msg:"Favorite moments"},
{src:'Snapchat-502016680.jpg',msg:"You are amazing"}
];

let currentSlide=0;
let gameActive=false;
let score=0;
let isGameOver=false;
let noCount=0;
let player,obstacles,targetMe,canvas,ctx,myImg;

document.getElementById("slide-text").innerText=images[0].msg;

function showSection(id){
document.querySelectorAll(".screen").forEach(s=>s.classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
if(id==="screen-game") initGame();
}

function nextSlide(){
currentSlide++;
if(currentSlide<images.length){
document.getElementById("display-img").src=images[currentSlide].src;
document.getElementById("slide-text").innerText=images[currentSlide].msg;
}else showSection("screen-letter");
}

function handleNo(){
const btn=document.getElementById("no-btn");
btn.style.position="absolute";
btn.style.left=Math.random()*70+"vw";
btn.style.top=Math.random()*70+"vh";
noCount++;
if(noCount>5){
btn.innerText="Fine YES ‚ù§Ô∏è";
btn.onclick=()=>respond('yes');
btn.style.background="var(--pink)";
}
}

function respond(type){
if(type==="yes"){
document.getElementById("finalVid").load();
showSection("screen-game");
}
}

function playFinalSurprise(){
const v=document.getElementById("finalVid");
showSection("screen-video");
v.currentTime=0;
v.muted=true;
v.play().then(()=>setTimeout(()=>v.muted=false,300))
.catch(()=>alert("Tap play ‚ñ∂"));
}

function initGame(){
canvas=document.getElementById("gameCanvas");
ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight*0.5;

myImg=new Image();
myImg.src="1000042285_imgupscaler.ai_Beta_2K.jpg";

resetGameOnly();

if(!gameActive){
gameActive=true;
update();
spawnObstacle();
}
}

function resetGameOnly(){
score=0;
isGameOver=false;
obstacles=[];
document.getElementById("score").innerText=0;
document.getElementById("mini-restart").classList.add("hidden");

player={x:50,y:canvas.height-80,w:50,h:50,dy:0,jumpForce:15,gravity:0.8,grounded:false};
targetMe={x:canvas.width+200,y:canvas.height-110,w:90,h:90};
}

function spawnObstacle(){
if(!isGameOver && score<10){
obstacles.push({x:canvas.width+50,y:canvas.height-70});
}
setTimeout(spawnObstacle,1500);
}

function handleJump(){
if(player.grounded && !isGameOver){
player.dy=-player.jumpForce;
player.grounded=false;
}
}

function update(){

if(isGameOver){
if(gameActive) requestAnimationFrame(update);
return;
}

ctx.clearRect(0,0,canvas.width,canvas.height);
ctx.fillStyle="#2ecc71";
ctx.fillRect(0,canvas.height-30,canvas.width,30);

player.dy+=player.gravity;
player.y+=player.dy;

if(player.y>canvas.height-80){
player.y=canvas.height-80;
player.grounded=true;
}

ctx.font="40px Arial";
ctx.fillText("üíÉ",player.x,player.y+40);

obstacles.forEach((ob,i)=>{
ob.x-=5;
ctx.fillText("üßç",ob.x,ob.y+35);

if(player.x<ob.x+25 && player.x+35>ob.x && player.y<ob.y+25){
isGameOver=true;
document.getElementById("mini-restart").classList.remove("hidden");
}

if(ob.x<-50){
obstacles.splice(i,1);
score++;
document.getElementById("score").innerText=score;
}
});

if(score>=10){

if(targetMe.x>canvas.width-120) targetMe.x-=2;

if(myImg.complete)
ctx.drawImage(myImg,targetMe.x,targetMe.y,targetMe.w,targetMe.h);

if(player.x+player.w>targetMe.x+10){

isGameOver=true;

setTimeout(()=>{
gameActive=false;
showSection("screen-surprise-btn");
},800);

return;
}
}

if(gameActive) requestAnimationFrame(update);
}
</script>

</body>
</html>
