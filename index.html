<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Amberly Valanka Fernandes</title>
    <style>
        :root { --pink: #ff4d6d; --dark: #590d22; --light: #fff0f3; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--light); color: var(--dark); overflow: hidden; touch-action: manipulation; }
        .screen { position: absolute; width: 100%; height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; transition: 0.5s; background: var(--light); z-index: 10; }
        .hidden { display: none !important; }
        
        /* Layout Elements */
        .card { background: white; padding: 25px; width: 85%; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 3px dashed var(--pink); box-sizing: border-box; }
        #display-img { max-width: 90%; max-height: 40vh; border: 5px solid white; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); margin-bottom: 15px; }
        .letter-content { width: 85%; max-height: 55vh; overflow-y: auto; background: white; padding: 20px; border-radius: 15px; border-left: 5px solid var(--pink); text-align: left; font-size: 0.9rem; line-height: 1.5; white-space: pre-line; box-sizing: border-box; }
        
        /* Buttons */
        button { background: var(--pink); color: white; border: none; padding: 12px 25px; border-radius: 50px; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin: 10px; box-shadow: 0 4px 10px rgba(255, 77, 109, 0.3); }
        .restart-btn { background: #555; font-size: 0.9rem; padding: 8px 15px; }
        .surprise-btn { background: #ff0054; font-size: 1.5rem; padding: 20px 40px; animation: pulse 1.5s infinite; }
        
        /* Game Area */
        #gameCanvas { background: #87CEEB; width: 100vw; height: 50vh; display: block; border-top: 4px solid var(--pink); }
        #touch-zone { width: 100vw; height: 25vh; background: white; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: bold; color: var(--pink); font-size: 1.2rem; }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
    </style>
</head>
<body>

    <div id="screen-card" class="screen">
        <div class="card">
            <h1 style="color: var(--pink); font-size: 1.4rem;">Happy Valentine's Day</h1>
            <p>To: Amberly Valanka Fernandes</p>
            <button onclick="showSection('screen-slideshow')">Open üíå</button>
        </div>
    </div>

    <div id="screen-slideshow" class="screen hidden">
        <img id="display-img" src="Snapchat-1108914825.jpg">
        <p id="slide-text" style="font-size: 1rem; italic; padding: 0 15px;"></p>
        <button onclick="nextSlide()">Next ‚ù§Ô∏è</button>
    </div>

    <div id="screen-letter" class="screen hidden">
        <div class="letter-content">
            <h2 style="text-align:center">My Dearest Amberly,</h2>
            <p>To my first love and my ultimate foodie girl, Amberly Valanka Fernandes. I wanted to write something that truly captures how I feel about you. From the first day we met, you‚Äôve brought a flavor to my life that I never knew was missing. Like my favorite meal, you are comforting, exciting, and something I can never get enough of. 

            Seeing your face in these photos reminds me of every laugh we‚Äôve shared and every goofy filter we‚Äôve ever used. You have this incredible way of making even the simplest moments feel like a grand adventure. 

            I love you more than all the pizzas and chocolates in the world!</p>
        </div>
        <button onclick="showSection('screen-proposal')">Continue...</button>
    </div>

    <div id="screen-proposal" class="screen hidden">
        <h1 style="font-size: 1.8rem;">Will you be my Valentine?</h1>
        <button onclick="respond('yes')">YES! ‚ù§Ô∏è</button>
        <button id="no-btn">NO üò≠</button>
    </div>

    <div id="screen-game" class="screen hidden">
        <div id="game-ui" style="padding: 10px; font-weight: bold; background: white; width: 100%; display: flex; justify-content: space-around; align-items: center;">
            <span>Score: <span id="score">0</span> / 10</span>
            <button id="mini-restart" class="restart-btn hidden" onclick="resetGameOnly()">Try Again üîÑ</button>
        </div>
        <canvas id="gameCanvas"></canvas>
        <div id="touch-zone" onclick="handleJump()">
            <span>TAP TO JUMP!</span>
            <span style="font-size: 0.8rem; font-weight: normal;">(Reach 10 to find me)</span>
        </div>
    </div>

    <div id="screen-surprise-btn" class="screen hidden">
        <h1 style="color: var(--pink)">We belong together! ‚ù§Ô∏è</h1>
        <p>You've won my heart. Now for the surprise...</p>
        <button class="surprise-btn" onclick="playFinalSurprise()">OPEN SURPRISE üéÅ</button>
    </div>

    <div id="screen-video" class="screen hidden">
        <video id="finalVid" width="300" height="500" controls playsinline>
            <source src="Snapchat-746107905 (1).mp4" type="video/mp4">
        </video>
        <br>
        <button onclick="location.reload()">Back to Start ‚ù§Ô∏è</button>
    </div>

    <script>
        // Data
        const images = [
            { src: 'Snapchat-1108914825.jpg', msg: "The first time you stole my heart..." },
            { src: 'Snapchat-2038672580.jpg', msg: "My beautiful foodie girl!" },
            { src: 'Snapchat-359429037.jpg', msg: "I love our goofy moments." },
            { src: 'Snapchat-756657078.jpg', msg: "Every photo of you is my favorite." },
            { src: 'Snapchat-502016680.jpg', msg: "Amberly, you are amazing." }
        ];

        let currentSlide = 0;
        let gameActive = false;
        let score = 0;
        let isGameOver = false;
        let player, obstacles, targetMe, gameSpeed, canvas, ctx, myImg;

        // Navigation
        function showSection(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            if(id === 'screen-game') initGame();
        }

        function nextSlide() {
            currentSlide++;
            if (currentSlide < images.length) {
                document.getElementById('display-img').src = images[currentSlide].src;
                document.getElementById('slide-text').innerText = images[currentSlide].msg;
            } else { showSection('screen-letter'); }
        }
        document.getElementById('slide-text').innerText = images[0].msg;

        function respond(type) {
            if(type === 'yes') showSection('screen-game');
        }

        function playFinalSurprise() {
            showSection('screen-video');
            document.getElementById('finalVid').play();
        }

        // Game Logic
        function initGame() {
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight * 0.5;

            myImg = new Image();
            myImg.src = '1000042285_imgupscaler.ai_Beta_2K.jpg';

            resetGameOnly();
            if(!gameActive) {
                gameActive = true;
                update();
                spawnObstacle();
            }
        }

        function resetGameOnly() {
            score = 0;
            isGameOver = false;
            gameSpeed = 5;
            obstacles = [];
            document.getElementById('score').innerText = "0";
            document.getElementById('mini-restart').classList.add('hidden');
            document.getElementById('touch-zone').style.opacity = "1";
            
            player = { x: 50, y: canvas.height - 80, w: 50, h: 50, dy: 0, jumpForce: 15, gravity: 0.8, grounded: false };
            targetMe = { x: canvas.width + 200, y: canvas.height - 110, w: 90, h: 90 };
        }

        function spawnObstacle() {
            if(!isGameOver && score < 10 && document.getElementById('screen-game').className.indexOf('hidden') === -1) {
                obstacles.push({ x: canvas.width + 50, y: canvas.height - 70 });
            }
            setTimeout(spawnObstacle, Math.random() * 1500 + 1000);
        }

        function handleJump() {
            if(player.grounded && !isGameOver) {
                player.dy = -player.jumpForce;
                player.grounded = false;
            }
        }

        function update() {
            if(!isGameOver) {
                ctx.clearRect(0,0, canvas.width, canvas.height);

                // Ground
                ctx.fillStyle = "#2ecc71";
                ctx.fillRect(0, canvas.height - 30, canvas.width, 30);

                // Player
                player.dy += player.gravity;
                player.y += player.dy;
                if(player.y > canvas.height - 80) { player.y = canvas.height - 80; player.grounded = true; }
                
                ctx.font = "40px Arial";
                ctx.fillText("üíÉ", player.x, player.y + 40);

                // Obstacles
                obstacles.forEach((ob, i) => {
                    ob.x -= gameSpeed;
                    ctx.fillText("üßç‚Äç‚ôÇÔ∏è", ob.x, ob.y + 35);

                    if(player.x < ob.x + 25 && player.x + 35 > ob.x && player.y < ob.y + 25 && player.y + 35 > ob.y) {
                        isGameOver = true;
                        document.getElementById('mini-restart').classList.remove('hidden');
                        document.getElementById('touch-zone').style.opacity = "0.3";
                    }

                    if(ob.x < -50) { 
                        obstacles.splice(i, 1); 
                        score++; 
                        document.getElementById('score').innerText = score;
                    }
                });

                // Finale
                if (score >= 10) {
                    if (targetMe.x > canvas.width - 120) targetMe.x -= 2;
                    if (myImg.complete) ctx.drawImage(myImg, targetMe.x, targetMe.y, targetMe.w, targetMe.h);
                    else ctx.fillText("üôã‚Äç‚ôÇÔ∏è", targetMe.x, targetMe.y + 50);

                    if (player.x + player.w > targetMe.x + 10) {
                        isGameOver = true;
                        ctx.font = "50px Arial";
                        ctx.fillText("üíñ", canvas.width/2 - 25, canvas.height/2);
                        setTimeout(() => showSection('screen-surprise-btn'), 1000);
                    }
                }
            }
            requestAnimationFrame(update);
        }

        // Mobile "No" button logic
        document.getElementById('no-btn').onmouseover = function() {
            this.style.position = 'absolute';
            this.style.left = Math.random() * 60 + 'vw';
            this.style.top = Math.random() * 60 + 'vh';
        };
    </script>
</body>
</html>
