<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Amberly Valanka Fernandes</title>
    <style>
        :root { --pink: #ff4d6d; --dark: #590d22; --light: #fff0f3; --gold: #ffb703; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--light); color: var(--dark); overflow: hidden; touch-action: manipulation; }
        .screen { position: absolute; width: 100%; height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; transition: 0.5s; background: var(--light); z-index: 10; }
        .hidden { display: none !important; }
        
        .card { background: white; padding: 25px; width: 85%; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 3px dashed var(--pink); box-sizing: border-box; }
        #display-img { max-width: 90%; max-height: 40vh; border: 5px solid white; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); margin-bottom: 15px; }
        .letter-content { width: 85%; max-height: 50vh; overflow-y: auto; background: white; padding: 20px; border-radius: 15px; border-left: 5px solid var(--pink); text-align: left; font-size: 0.95rem; line-height: 1.6; white-space: pre-line; box-sizing: border-box; }
        
        button { background: var(--pink); color: white; border: none; padding: 14px 28px; border-radius: 50px; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin: 10px; box-shadow: 0 4px 10px rgba(255, 77, 109, 0.3); transition: 0.3s; z-index: 100; }
        #no-btn { background: #6c757d; position: relative; transition: 0.1s linear; }
        .surprise-btn { background: #ff0054; font-size: 1.5rem; padding: 20px 40px; animation: pulse 1.5s infinite; border: 4px solid var(--gold); }
        
        #gameCanvas { background: linear-gradient(#87CEEB, #e0f2f1); width: 100vw; height: 50vh; display: block; border-top: 4px solid var(--pink); }
        #touch-zone { width: 100vw; height: 25vh; background: white; display: flex; align-items: center; justify-content: center; font-weight: bold; color: var(--pink); font-size: 1.5rem; }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        @keyframes spin { from {transform: rotate(0deg);} to {transform: rotate(360deg);} }
        @keyframes glitch { 0% { transform: translate(0); } 20% { transform: translate(-5px, 5px); } 40% { transform: translate(-5px, -5px); } 60% { transform: translate(5px, 5px); } 80% { transform: translate(5px, -5px); } 100% { transform: translate(0); } }
    </style>
</head>
<body>

    <div id="screen-card" class="screen">
        <div class="card">
            <h1 style="color: var(--pink);">Happy Valentine's Day ‚ù§Ô∏è</h1>
            <p>Ready to see your gift, Amberly?</p>
            <button onclick="startExperience()">Start Here üíå</button>
        </div>
    </div>

    <div id="screen-slideshow" class="screen hidden">
        <img id="display-img" src="Snapchat-1108914825.jpg">
        <p id="slide-text" style="font-weight: bold; color: var(--pink); min-height: 2em; padding: 0 10px;"></p>
        <button onclick="nextSlide()">Next ‚ù§Ô∏è</button>
    </div>

    <div id="screen-letter" class="screen hidden">
        <div class="letter-content">
            <h2 style="text-align:center">Dearest Amberly,</h2>
            You‚Äôve brought so much flavor and joy into my life. Like the best meal I‚Äôve ever had, I can never get enough of your smile. 

            I love you more than all the pizzas and chocolates in the world! üíñ
        </div>
        <button onclick="showSection('screen-proposal')">Continue...</button>
    </div>

    <div id="screen-proposal" class="screen hidden">
        <h1 id="prop-text" style="padding:0 20px;">Will you be my Valentine?</h1>
        <div id="btn-container">
            <button onclick="respond('yes')">YES! ‚ù§Ô∏è</button>
            <button id="no-btn" onmouseover="prankNo()" onclick="prankNo()">NO üò≠</button>
        </div>
    </div>

    <div id="screen-warning" class="screen hidden">
        <div class="card">
            <h2 style="color: var(--pink);">The Love Test!</h2>
            <p>Prove your love by reaching 15 points!</p>
            <p style="color: red; font-weight: bold;">Careful... the boys are jumping today! üèÉ‚Äç‚ôÇÔ∏è</p>
            <h1 style="font-size: 3rem; color: #ff0054; margin: 10px 0;">15</h1>
            <button onclick="showSection('screen-game')">START GAME üíÉ</button>
        </div>
    </div>

    <div id="screen-game" class="screen hidden">
        <div style="background: white; padding: 10px; font-weight: bold; width: 100%;">
            Score: <span id="score">0</span> / 15 üíÉ
        </div>
        <canvas id="gameCanvas"></canvas>
        <div id="touch-zone" onclick="handleJump()">TAP TO JUMP!</div>
    </div>

    <div id="screen-surprise-btn" class="screen hidden">
        <h1 style="color: var(--pink)">YOU WON MY HEART! üéâ</h1>
        <button class="surprise-btn" onclick="playFinalSurprise()">OPEN SURPRISE üéÅ</button>
    </div>

    <div id="screen-video" class="screen hidden">
        <video id="finalVid" width="300" height="500" style="border-radius: 15px; background: #000;" controls playsinline>
            <source src="surprise.mp4" type="video/mp4">
        </video>
        <br>
        <button onclick="location.reload()">Back to Start ‚ù§Ô∏è</button>
    </div>

    <audio id="bg-music" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>
    <audio id="sfx-pop" src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3"></audio>
    <audio id="sfx-win" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"></audio>
    <audio id="sfx-fail" src="https://assets.mixkit.co/active_storage/sfx/253/253-preview.mp3"></audio>

    <script>
        const images = [
            { src: 'Snapchat-1108914825.jpg', msg: "The first time you stole my heart..." },
            { src: 'Snapchat-2038672580.jpg', msg: "My beautiful foodie girl! üçî" },
            { src: 'Snapchat-359429037.jpg', msg: "Goofy and perfect. ü§™" },
            { src: 'Snapchat-756657078.jpg', msg: "You're amazing, Amberly." },
            { src: 'Snapchat-502016680.jpg', msg: "Ready for the challenge?" }
        ];

        let currentSlide = 0;
        let score = 0;
        let isGameOver = false;
        let noClicks = 0;
        let player, obstacles, canvas, ctx;

        function startExperience() {
            // Browsers need a click to start music
            document.getElementById('bg-music').volume = 0.4;
            document.getElementById('bg-music').play();
            showSection('screen-slideshow');
        }

        function showSection(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            if(id === 'screen-game') initGame();
        }

        function nextSlide() {
            currentSlide++;
            if (currentSlide < images.length) {
                document.getElementById('display-img').src = images[currentSlide].src;
                document.getElementById('slide-text').innerText = images[currentSlide].msg;
                document.getElementById('sfx-pop').play();
            } else { showSection('screen-letter'); }
        }
        document.getElementById('slide-text').innerText = images[0].msg;

        // --- THE INTERESTING NO BUTTON ---
        function prankNo() {
            const noBtn = document.getElementById('no-btn');
            const propText = document.getElementById('prop-text');
            noClicks++;

            const pranks = [
                "Are you sure? ü§®",
                "Try again! üòú",
                "Wrong button! ‚ùå",
                "Not an option! üíñ",
                "Click Yes instead! üòâ",
                "I'm shrinking! ü§è",
                "Now I'm spinning! üåÄ",
                "Can't catch me! üèÉ‚Äç‚ôÇÔ∏è",
                "Getting harder? üòÇ",
                "Just give up! ‚ù§Ô∏è"
            ];

            propText.innerText = pranks[noClicks % pranks.length];
            
            // Random movement
            noBtn.style.position = 'absolute';
            noBtn.style.left = Math.random() * 70 + 'vw';
            noBtn.style.top = Math.random() * 70 + 'vh';
            
            // Effects based on clicks
            if(noClicks > 4) noBtn.style.transform = `scale(${1 - noClicks * 0.05})`;
            if(noClicks > 6) noBtn.style.animation = "spin 1s infinite linear";
            if(noClicks > 8) noBtn.style.animation = "glitch 0.2s infinite";

            // The final surrender
            if(noClicks > 10) {
                noBtn.innerText = "OKAY, YES! ‚ù§Ô∏è";
                noBtn.style.background = "var(--pink)";
                noBtn.style.transform = "scale(1.3)";
                noBtn.style.animation = "pulse 1s infinite";
                noBtn.style.position = "static";
                noBtn.onmouseover = null;
                noBtn.onclick = () => respond('yes');
            }
        }

        function respond(type) {
            if(type === 'yes') {
                document.getElementById('sfx-win').play();
                showSection('screen-warning');
            }
        }

        function playFinalSurprise() {
            showSection('screen-video');
            document.getElementById('bg-music').pause(); // Stop music for video
            document.getElementById('finalVid').play();
        }

        // --- GAME LOGIC ---
        function initGame() {
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight * 0.5;
            resetGame();
            updateLoop();
            spawnObstacle();
        }

        function resetGame() {
            score = 0;
            isGameOver = false;
            obstacles = [];
            document.getElementById('score').innerText = "0";
            player = { x: 50, y: canvas.height - 80, dy: 0, jumpForce: 15, gravity: 0.7, grounded: false };
        }

        function spawnObstacle() {
            if(!isGameOver && score < 15) {
                let isJumper = Math.random() > 0.6; 
                obstacles.push({ 
                    x: canvas.width + 50, 
                    y: canvas.height - 80, 
                    dy: 0, 
                    willJump: isJumper, 
                    hasJumped: false,
                    emoji: isJumper ? "üèÉ‚Äç‚ôÇÔ∏è" : "üßç‚Äç‚ôÇÔ∏è" 
                });
                setTimeout(spawnObstacle, 1400 + Math.random() * 600);
            }
        }

        function handleJump() {
            if(player.grounded) {
                player.dy = -player.jumpForce;
                player.grounded = false;
                document.getElementById('sfx-pop').currentTime = 0;
                document.getElementById('sfx-pop').play();
            }
        }

        function updateLoop() {
            if(isGameOver) return;
            ctx.clearRect(0,0, canvas.width, canvas.height);
            ctx.fillStyle = "#2ecc71";
            ctx.fillRect(0, canvas.height - 30, canvas.width, 30);
            
            player.dy += player.gravity;
            player.y += player.dy;
            if(player.y > canvas.height - 80) { player.y = canvas.height - 80; player.grounded = true; }
            ctx.font = "40px Arial";
            ctx.fillText("üíÉ", player.x, player.y + 40);

            obstacles.forEach((ob, i) => {
                ob.x -= 6;

                if(ob.willJump && !ob.hasJumped && ob.x < player.x + 180) {
                    ob.dy = -10;
                    ob.hasJumped = true;
                }
                
                if(ob.hasJumped) {
                    ob.dy += 0.5;
                    ob.y += ob.dy;
                    if(ob.y > canvas.height - 80) ob.y = canvas.height - 80;
                }

                ctx.fillText(ob.emoji, ob.x, ob.y + 40);

                let dx = player.x - ob.x;
                let dy = player.y - ob.y;
                let distance = Math.sqrt(dx*dx + dy*dy);
                if(distance < 38) {
                    document.getElementById('sfx-fail').play();
                    resetGame();
                }

                if(ob.x < -50) { 
                    obstacles.splice(i, 1); 
                    score++; 
                    document.getElementById('score').innerText = score;
                    if(score >= 15) {
                        isGameOver = true;
                        document.getElementById('sfx-win').play();
                        showSection('screen-surprise-btn');
                    }
                }
            });
            requestAnimationFrame(updateLoop);
        }
    </script>
</body>
</html>
